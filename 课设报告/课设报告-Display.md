# 操作系统课程设计

## 课设目的

&emsp;&emsp;操作系统课程设计是计算机科学与技术专业学生必修的实践性教学环节之一，是学习了操作系统课程后的综合性设计实践课程，是对该课程所学知识进行的一次全面的综合训练。通过学生完成所要求的设计任务，使学生系统掌握操作系统的基本原理，系统的设计与实现方法，培养学生利用所学知识解决复杂工程问题的能力。通过查阅资料、自学、指导和讨论，使学生掌握操作系统的功能模块的设计与实现方法；通过制定合理的实验方案和实验结果的分析，培养学生的科学实验能力；通过对实验结果的分析和总结以及课程设计报告的撰写，掌握科学实验方法以及科学实验报告的撰写方法；通过交流和答辩，培养学生的口头交流和表达能力。



## 课设题目

&emsp;&emsp;实现一个 CPU & 内存调度管理原型系统



## 系统功能结构

### 概述

&emsp;&emsp;本系统主要包含以下几个功能模块：

1. **进程管理**：负责创建和调度进程，管理进程的生命周期。
2. **页面调度**：处理内存分配和页面置换，以优化内存使用。
3. **结果记录**：记录和计算进程的周转时间和带权周转时间，输出到文件。
4. **用户交互**：提供用户界面，允许用户设置参数，如时间片长度、页面大小等。

### 模块间关系和流程

1. **用户交互**：系统启动时，用户通过菜单设置参数，这些参数影响进程管理和页面调度的行为。

2. **进程管理**：
   - 使用先来先服务（FCFS）或时间片轮转（RR）算法调度进程。
   - 管理进程状态（如就绪、运行、等待、完成）。
   - 与页面调度模块交互，请求必要的内存页面。

3. **页面调度**：
   - 根据进程管理模块的需求分配和回收内存页面。
   - 使用先进先出（FIFO）或最近最少使用（LRU）算法管理页面置换。
   - 直接影响进程的运行，尤其是在内存密集型操作中。

4. **结果记录**：
   - 在进程完成后，计算其周转时间和带权周转时间。
   - 将统计结果输出到文件 result.txt，以供分析和查阅。



## 主要数据结构

### 进程控制块（PCB）

&emsp;&emsp;`pcb` 类是一个关键的数据结构，代表了系统中的一个进程。它包含了进程的多种属性和状态信息，这些属性包括但不限于：

- `name`：进程名，用于标识每个独立的进程。
- `status`：进程的当前状态，如“就绪”、“运行”、“等待”等。
- `arraiveTime`：进程到达时间，即进程创建或提交执行的时间。
- `priority`：进程优先级，用于某些调度算法中判断进程的执行顺序。
- `pageFrame`：分配给进程的页面列表，用于内存管理。
- `pageFaultCount`：进程发生的缺页次数。
- `serveTime` 和 `serveTimeLeft`：进程的总服务时间和剩余服务时间。
- `finishTime`、`turnAroundTime` 和 `weightTunAroundTime`：分别记录进程的完成时间、周转时间和带权周转时间。
- `fc`：存储进程中的函数列表。
- `runInfo`：存储进程运行的关键信息，如运行的操作和时间节点。
- `currentAddr`：存储进程地址的指针，用于确定当前运行函数。

### 函数类

&emsp;&emsp;在 `pcb` 类中，`function` 类用于表示进程中的一个函数。它包含以下属性：

- `name`：函数名，标识函数。
- `lenth`：函数的大小（通常以字节为单位）。
- `rtAddr`：函数在进程中的相对地址。

&emsp;&emsp;这个类帮助管理和跟踪进程中的单独函数，对于页面调度和内存管理非常重要。

### 运行类

&emsp;&emsp;同样在 `pcb` 类中，`run` 类用于记录进程运行期间的关键事件。它包含以下信息：

- `timeNode`：事件发生的时间节点。
- `operation`：执行的操作类型，如“跳转”、“读写磁盘”或“结束”。
- `operateAddr` 和 `ioTime`：操作相关的地址或I/O操作时间。
- `finishflag`：标识操作是否完成。

### 页面列表

&emsp;&emsp;每个 `pcb` 对象都包含一个 `pageFrame` 列表，它代表为该进程分配的内存页面。这是一个关键的数据结构，用于管理每个进程在内存中的页面。

### 全局变量和队列

- `readyQueue` 和 `ioQueue`：分别用于管理就绪状态和等待I/O操作的进程队列。
- `process`：存储所有进程的列表。
- `pageFrameAmount`：记录为每个进程分配的页面数量。

&emsp;&emsp;这些数据结构是实现进程调度和内存管理的基础，它们帮助本系统有效地跟踪和控制多个进程及其资源需求。



## 系统设计

![程序流程图](https://raw.githubusercontent.com/SlenderData/img/main/images/2024/01/09/22-36-58-7b109b43daebe064d431cfe136f56602-程序流程图.drawio-1da4da.svg)



## 运行结果展示与分析

![image-20240110003610954](https://raw.githubusercontent.com/SlenderData/img/main/images/2024/01/10/00-36-11-8f0e156473103dd86d99fca4e8206d82-image-20240110003610954-19c200.png)

![image-20240110003837872](https://raw.githubusercontent.com/SlenderData/img/main/images/2024/01/10/00-38-37-43a18ee3db48c1b3ba5a7b898f069d99-image-20240110003837872-ae8cd2.png)

![image-20240110060934065](https://raw.githubusercontent.com/SlenderData/img/main/images/2024/01/10/06-09-34-7eb073aa740b9163ef615834f947e97e-image-20240110060934065-ec17ff.png)

![image-20240110061349326](https://raw.githubusercontent.com/SlenderData/img/main/images/2024/01/10/06-13-49-f63ad4e8e83925f1d82ef72193f48112-image-20240110061349326-aa54a1.png)

![image-20240110061727720](https://raw.githubusercontent.com/SlenderData/img/main/images/2024/01/10/06-17-27-907adcf680c2e298eb0ad37e3f3abd7b-image-20240110061727720-f6c013.png)

![image-20240110062323971](https://raw.githubusercontent.com/SlenderData/img/main/images/2024/01/10/06-23-24-1a49c326707276ab7249ad4c69d4239b-image-20240110062323971-7e2efa.png)

![image-20240110062634152](https://raw.githubusercontent.com/SlenderData/img/main/images/2024/01/10/06-26-34-2ca6c8706a5d313d41f3297696dde83c-image-20240110062634152-7d1d71.png)

![image-20240110063154955](https://raw.githubusercontent.com/SlenderData/img/main/images/2024/01/10/06-31-55-5613986d6c5757f54dfb833ef64f1e76-image-20240110063154955-fb3b14.png)

![image-20240110064130505](https://raw.githubusercontent.com/SlenderData/img/main/images/2024/01/10/06-41-30-6ac63c6450c7167b3f394b3979600757-image-20240110064130505-d34628.png)

![image-20240110064356913](https://raw.githubusercontent.com/SlenderData/img/main/images/2024/01/10/06-43-56-e2b052a944082f81b37c22d2a62674ea-image-20240110064356913-d703bf.png)

![image-20240110064907318](https://raw.githubusercontent.com/SlenderData/img/main/images/2024/01/10/06-49-07-8af17efa5a006c3aa8392c87b8163c18-image-20240110064907318-f710a3.png)



## 课程设计中遇到的问题及解决方法

&emsp;&emsp;实现先来先服务和时间片轮转调度算法时，需要考虑进程状态的管理和时间的精确控制，这比我预期的设想更复杂。通过仔细设计和维护进程状态，确保在每个时间点正确处理进程。例如，使用队列来管理就绪状态的进程，并使用计时器或循环计数来模拟时间片的流逝。

&emsp;&emsp;设计一个易于使用且直观的用户界面，使用户能够轻松设置参数和查看程序运行结果，这也是一个挑战。最初打算使用 Python 标准库中的 tkinter 实现一个可视化的界面，但时间已经不允许我从零学习和实现了。最终我选择采用简单但有效的命令行界面设计，确保清晰的指令和输出信息。



## 设计感想

&emsp;&emsp;在完成这个操作系统课程设计的过程中，我获得了不仅是编程技能的提升，更重要的是对操作系统原理和内部工作机制的深入理解。这个项目不仅是对我所学知识的实践应用，也是对我解决问题能力的重大考验。

&emsp;&emsp;通过这个项目，我意识到理论知识和实践操作之间的重要联系。虽然理论课程提供了必要的基础，但将这些理论应用到实际问题中，需要一种全新的思考方式。在实现进程调度和页面管理算法时，我不得不反复回顾理论，确保我对概念的理解是准确的。

&emsp;&emsp;这个项目中我选择了使用 Python 来实现较为复杂的逻辑。在这个过程中，我的编程能力得到了显著提升。我学会了如何更有效地组织代码，使其既易于理解又易于维护。同时，我也学会了一些高级编程技巧，比如面向对象编程和对 Python List 列表数据结构的高效使用。

&emsp;&emsp;通过这次课程设计，我对操作系统的工作原理有了更深的理解，也对计算机科学领域的其他方面产生了浓厚的兴趣。我期待在未来的学习和职业生涯中，将这次的学习经历转化为更大的成功。



## 附件

[Final.py](https://github.com/SlenderData/Operating-System-Curriculum-Design/blob/main/Final.py)



